version: v2

project:
  name: pydantic_gamble

  vars:
    - name: ANTHROPIC_API_KEY
      value: ""
      secret: true
    - name: LOGFIRE_TOKEN
      value: ""
      secret: true
    - name: MODEL_NAME
      value: "anthropic:claude-sonnet-4-0"

  connections:
    - name: slack
      integration: slack

  triggers:
    - name: slack_message
      connection: slack
      event_type: message
      filter: "data.thread_ts == '' && data.text.startsWith('!gamble')"
      call: handlers.py:on_slack_message
      is_durable: true
